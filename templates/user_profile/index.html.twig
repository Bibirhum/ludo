{% extends 'layoutUserProfile.html.twig' %}

{% block title %} Mon profil{% endblock %}



{% block body %}

  <link href="https://fonts.googleapis.com/css?family=Catamaran:100,200,300,400,500,600,700,800,900" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Lato:100,100i,300,300i,400,400i,700,700i,900,900i" rel="stylesheet">
  
<div class="page-header header-filter" data-parallax="true"></div>
  
  
  
  <div class="main main-raised w-50 mx-auto">

		<div class="profile-content" >
      {% if is_granted('IS_AUTHENTICATED_FULLY')%}
    
      {% endif %}

      <div class="container">
        <div class="row">
	        <div class="col-md-6 ml-auto mr-auto">
        	  <div class="profile">
	            <div class="avatar">
                {% if user.avatar is empty %}
                <img src="https://api.adorable.io/avatars/285/abott@adorable.png" alt="Circle Image" class="img-raised rounded-circle img-fluid">
                {% else %}
                <img src="{{asset(user.avatar)}}" alt="Circle Image" class="img-raised rounded-circle img-fluid">
                {% endif %}
              </div>
              <div class="name">
                <h1 class="title">Bienvenue {{user.username}} ! </h1>
              </div>
              <div class="description text-center">
                <p class="font-italic user_bio">{{user.bio}}</p>
              </div>

              <a href="{{ path('message_read', {'id' : user.id}) }}" target="_blank" class="btn-primary"><i class="far fa-envelope"></i>  Mes messages</a>

              <div id="accordion" role="tablist">
                <div class="profile-tabs">
                  <ul class="nav nav-pills nav-pills-icons justify-content-center" role="tablist">
                    <li class="nav-item">
                      <a class="nav-link dropdown-toggle" data-toggle="collapse" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                      <i class="fas fa-user"></i>
                      <h4>Mes infos</h4>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
              <div id="collapseOne" class="collapse show" role="tabpanel" aria-labelledby="headingOne">
                <ul class="list-group list-group-flush  d-flex align-items-center">
                  <li class="list-group-item">{{user.email}}</li>
                  <li class="list-group-item">{{user.address}}</li>
                  <li class="list-group-item">{{user.zipcode}}</li>
                  <li class="list-group-item">{{user.city}}</li>
                </ul>
                {% if is_granted('IS_AUTHENTICATED_FULLY')%}
                <div>
                  <a class="change" href="{{ path('edit_user_profile') }}">
                    <i class="material-icons">
                      create
                    </i>
                    Modifier mes informations
                  </a>
                </div>
                <div>
                    <a class="change" href="{{ path('edit_user_mdp') }}">
                      <i class="material-icons">
                        create
                      </i>
                      Modifier mon mot de passe
                    </a>
                  </div>
                {% endif %}
              </div>
            </div>             
          </div>
        </div>
      </div>


      <div class="row">
        <div class="col-md-6 ml-auto mr-auto">
          <div id="accordion" role="tablist">
            <div class="profile-tabs">
              <ul class="nav nav-pills nav-pills-icons justify-content-center" role="tablist">
                <li class="nav-item">
                  <a class="nav-link dropdown-toggle" data-toggle="collapse" href="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
                  <i class="fas fa-dice-six"></i>
                      <h4>Mes jeux</h4>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>


      



      <div id="collapseTwo" class="collapse show" role="tabpanel" aria-labelledby="headingOne">
        <div class="tab-content tab-space ml-5 mr-5">
            <div class="row">
              {% if is_granted('IS_AUTHENTICATED_FULLY')%}
              <div class="col-md-3">
                <div class="card">
                  <div class="card-header">
                  <h3>
                  Ajouter un jeu
                  </h3>
                  </div>
                  <a class="change" href="{{ path('games_search')}}">
                    <i class="material-icons add_circle_outline">
                      add_circle_outline
                    </i>
                  </a>
                </div>
              </div>
              {% endif %}
              
              {% for item in user_game %}

              <div class="col-md-3">
                <div class="card">
                <div class="card-header">
                <h3>{{ item.games.name }}</h3>
                </div>
                  {# à modifier avec asset pour accueillir les vraies images   #}
                  <img class="card-img-top" src="{{ item.games.thumbnail }}" alt="Card image cap">
                  <div class="card-body">
                    <h6>Catégorie : {{ item.games.category.name }}</h6>
                    <h6>Commentaire :</h6> 
                    <p>{% if item.commentary %}
                    <em>{{ item.commentary}}</em> {% else %}
                    <em>Pas encore de commentaire</em> {% endif %}</p>
                    <h6>Note perso :</h6> {% if item.rating %}
                    {{ item.rating }}/5
                    {% else %}<p><em>Pas encore de note</em></p>{% endif %}
                    <br>
                    {% if item.playsGame == 1 %}
                     <i class="far fa-thumbs-up"></i>
                    J'y joue !
                    {% endif %}
                    {% if item.ownsGame == 1 %}
                    <br><i class="far fa-hand-paper"></i>
                    </i>Je l'ai !
                    {% endif %}
                    {% if item.playsGame == 0 and item.ownsGame == 0 %}
                    <br><i class="far fa-smile-wink"></i>  Je suis intéressé(e) !
                    {% endif %} 
                    <a href="{{ path('edit_user_game', {'id' : item.games.id}) }}" class="btn-primary mt-2">Modifier mon avis</a>
                    <a href="{{ path('game_details', {'id' : item.games.id}) }}" class="btn-primary mt-2">Fiche du jeu</a>

                  </div>
                </div>
              </div>
              {% endfor %}
            </div>
        </div>
      </div>

      
      </div>
    </div>
  </div>

  <script src="https://kit.fontawesome.com/cef3058f65.js"></script>


{# id : {{ user_game_association.id }}
commentaire : {{ user_game.commentary }}<br>
rating : {{ user_game.rating }}<br>
playsGame : {{ user_game.playsGame }}<br>
ownsGame :  {{ user_game.ownsGame }}<br> #}
 
{% endblock %}

